<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Firebase Image Upload in Javascript</title>
  </head>
  <body>
    <input type="file" id="photo" />
    <img id="image" src="../firebaseupload/Ballet.jpg"/>
    <button onclick="uploadImage()">Upload Image</button>
    <!-- Stream video via webcam -->
<!--    <video id="video" width=400 height=400 playsinline controls autoplay></video>-->

<!-- Trigger canvas web API -->
<!--    <button id="snap">Capture</button>-->

<!-- Webcam video snapshot -->

<!--<canvas id="canvas" width="640" height="480"></canvas>-->
  </body>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-analytics.js"></script>

  <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyC8Mrrfx_zZxPAWhtB4xfvDrG9EZpnruSU",
            authDomain: "gymwebfirebase.firebaseapp.com",
            projectId: "gymwebfirebase",
            storageBucket: "gymwebfirebase.appspot.com",
            messagingSenderId: "1019476157862",
            appId: "1:1019476157862:web:4e80d631ff7fc280bd1b67",
            measurementId: "G-D2WG1GS65V"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();

    
    console.log(firebase);

    function uploadImage() {
      const ref = firebase.storage().ref();//refrenace to fire base storge bucket
      const file = document.querySelector("#photo").files[0];//file is the image file from the html FORM
      const name = +new Date() + "-" + file.name;//name is the name of the file/photo we upload
      console.log(ref)
      console.log(file)
      console.log(name)
      const metadata = {
        contentType: file.type
      };
      const task = ref.child(name).put(file, metadata);
      task
        .then(snapshot => snapshot.ref.getDownloadURL())
        .then(url => {
          console.log(url);
          alert("image upload sus")
          document.getElementById("#image").src-url.src
         
        })
        .catch(console.error);
    }
</script>
</html>